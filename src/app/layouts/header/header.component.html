<div class="header bg-white">
  <nav class="container d-flex justify-content-between align-items-center">
    <!-- icon bar mobile -->
    <div class="nav-response flex-2 d-block d-lg-none">
      <div class="icon-open-nav-mobile d-inline-block" (click)="handleToggleMenuMobile()">
        <i class="fas fa-bars"></i>
      </div>
    </div>

    <a routerLink="/" class="img-header-box">
      <img class="" src="./../../../assets/img/logo.png" alt="" />
    </a>

    <div class="menu-desktop d-none d-lg-flex align-self-stretch">
      <div class="d-flex" id="menu_login-box">
        <ul class="nav menu_login-box d-flex align-items-center mr-auto home-nav pr-2">
          <li class="nav-item" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
            <a class="fw-bold menu-mobile__item-link text-decoration-none nav-link-item" routerLink="/">Trang chủ</a>
          </li>

          <li class="nav-item" routerLinkActive="active">
            <a
              class="fw-bold menu-mobile__item-link nav-link-item text-decoration-none"
              [routerLink]="['/danh-gia-nang-luc']"
            >
              Đánh giá năng lực
            </a>
          </li>

          <li class="nav-item" routerLinkActive="active">
            <a class="fw-bold menu-mobile__item-link nav-link-item text-decoration-none" [routerLink]="['/cuoc-thi']">
              Cuộc thi
            </a>
          </li>

          <li class="nav-item align-self-stretch d-flex align-items-center" routerLinkActive="active">
            <div
              class="fw-bold menu-mobile__item-link position-relative text-decoration-none nav-link-item p-0 d-flex align-items-center"
            >
              <span>Tuyển dụng</span>
              <div class="nav-item__icon">
                <i class="fa-solid fa-caret-down"></i>
              </div>

              <ul class="sub-menu position-absolute">
                <li class="sub-menu__item" routerLinkActive="active">
                  <a
                    class="fw-bold menu-mobile__item-link sub-menu__link fw-bold menu-mobile__item-link nav-link-item text-decoration-none"
                    [routerLink]="['/tin-tuc-tuyen-dung']"
                  >
                    Tin tức tuyển dụng
                  </a>
                </li>
                <li class="sub-menu__item" routerLinkActive="active">
                  <a
                    class="fw-bold menu-mobile__item-link sub-menu__link fw-bold menu-mobile__item-link nav-link-item text-decoration-none"
                    [routerLink]="['/dot-tuyen-dung-doanh-nghiep']"
                  >
                    Đợt tuyển dụng với doanh nghiệp
                  </a>
                </li>
              </ul>
            </div>
          </li>
          <!-- <li class="nav-item" routerLinkActive="active">
            <a class="fw-bold menu-mobile__item-link nav-link-item text-decoration-none" [routerLink]="['/tuyen-dung']">
              Tuyển dụng
            </a>
          </li> -->

          <!-- <li class="nav-item align-self-stretch d-flex align-items-center" routerLinkActive="active">
            <div
              class="fw-bold menu-mobile__item-link position-relative text-decoration-none nav-link-item p-0 d-flex align-items-center"
            >
              <span>Thử thách</span>
              <div class="nav-item__icon">
                <i class="fa-solid fa-caret-down"></i>
              </div>

              <ul class="sub-menu position-absolute">
                <li class="sub-menu__item" routerLinkActive="active">
                  <a
                    class="fw-bold menu-mobile__item-link sub-menu__link fw-bold menu-mobile__item-link nav-link-item text-decoration-none"
                    [routerLink]="['/capacity-join']"
                  >
                    Trò chơi trực tiếp
                  </a>
                </li>
                <li class="sub-menu__item" routerLinkActive="active">
                  <a
                    class="fw-bold menu-mobile__item-link sub-menu__link fw-bold menu-mobile__item-link nav-link-item text-decoration-none"
                    [routerLink]="['/challenge']"
                  >
                    Thử thách mã
                  </a>
                </li>
              </ul>
            </div>
          </li> -->

          <li class="nav-item" routerLinkActive="active">
            <a class="fw-bold menu-mobile__item-link nav-link-item text-decoration-none" routerLink="/tin-tuc">
              Tin tức
            </a>
          </li>

          <li class="nav-item" routerLinkActive="active">
            <a class="fw-bold menu-mobile__item-link nav-link-item text-decoration-none" routerLink="/hoi-dap">
              Hỏi đáp
            </a>
          </li>

          <li *ngIf="user && checkEmpty(user)" (click)="openSaveInfo()" class="open-save-info">
            <i
              matBadgePosition="after"
              [matBadge]="countInfoSaveItem"
              class="fa-solid fs-5 fa-bookmark"
              matBadgeColor="warn"
            ></i>
          </li>

          <li *ngIf="!user || !checkEmpty(user)" class="btn-login-desktop d-none d-lg-block">
            <a (click)="handleLogin()">
              <button class="my-btn-primary my-btn-s">Đăng nhập</button>
            </a>
          </li>

          <li *ngIf="user && checkEmpty(user)">
            <img
              *ngIf="user.avatar"
              mat-icon-button
              [matMenuTriggerFor]="menu"
              class="header-avatar-user"
              [src]="user.avatar"
              alt=""
            />
            <mat-menu class="mt-2" #menu="matMenu">
              <button mat-menu-item routerLink="/tai-khoan">
                <span>Thông tin tài khoản</span>
              </button>

              <button (click)="logOut()" mat-menu-item>
                <span>Đăng xuất</span>
              </button>
            </mat-menu>
          </li>
        </ul>
      </div>
    </div>

    <!-- icon right mobile -->
    <ul class="header__mobile-right d-flex d-lg-none m-0 flex-2 justify-content-end">
      <li *ngIf="user && checkEmpty(user)" (click)="openSaveInfo()" class="open-save-info">
        <i
          [matBadge]="countInfoSaveItem"
          matBadgePosition="after"
          class="fa-solid fs-5 fa-bookmark"
          matBadgeColor="warn"
        ></i>
      </li>

      <li *ngIf="!user || !checkEmpty(user)">
        <a (click)="handleLogin()">
          <button class="my-btn my-btn-primary my-btn-xs">Đăng nhập</button>
        </a>
      </li>

      <li *ngIf="user && checkEmpty(user)">
        <img
          *ngIf="user.avatar"
          mat-icon-button
          [matMenuTriggerFor]="menu"
          class="header-avatar-user"
          [src]="user.avatar"
          alt=""
        />
        <mat-menu class="mt-2" #menu="matMenu">
          <button mat-menu-item routerLink="/tai-khoan">
            <span>Thông tin tài khoản</span>
          </button>

          <button (click)="logOut()" mat-menu-item>
            <span>Đăng xuất</span>
          </button>
        </mat-menu>
      </li>
    </ul>
  </nav>

  <div id="mySidepanel" class="sidepanel">
    <div class="p-3">
      <header class="d-flex justify-content-between align-items-center">
        <h2 class="sidepanel-title"><i class="primary-color fa-solid fs-5 fa-bookmark"></i> Nội dung được lưu</h2>
        <button (click)="closeSaveInfo(true)" class="btn-save-close">
          <i class="fa-solid fa-xmark"></i>
        </button>
      </header>
      <ul class="sidepanel__nav-list my-3">
        <li class="sidepanel__nav-item contest active" (click)="getContestStatus($event)">
          <a class="sidepanel__nav-link">Cuộc Thi ({{ countPost || 0 }})</a>
        </li>
        <li class="sidepanel__nav-item post" (click)="getPostStatus($event)">
          <a [attr.disabled]="!statusPage" class="sidepanel__nav-link">Tuyển dụng ({{ countContest || 0 }})</a>
        </li>
      </ul>
      <div *ngIf="statusPage" class="sidepanel__nav-content">
        <div class="" *ngIf="typeTab == 0 && contests.length > 0">
          <app-contest-item
            *ngFor="let item of contests"
            [item]="item"
            (requestFavorite)="filterContest($event)"
            (contestRelated)="closeSaveInfo($event)"
          ></app-contest-item>
        </div>
        <div class="" *ngIf="typeTab == 1 && posts.length > 0">
          <app-recruitment-position *ngFor="let item of posts" [item]="item" (requestFavorite)="filterPost($event)">
          </app-recruitment-position>
        </div>
        <div
          *ngIf="(typeTab == 0 && contests.length == 0) || (typeTab == 1 && posts.length == 0)"
          class="d-flex justify-content-center align-items-center mt-5"
        >
          <img src="../../../assets/img/no-result.png" alt="No data" />
        </div>
      </div>
      <div *ngIf="!statusPage">
        <ngx-skeleton-loader
          [theme]="{
            'height.px': '200',
            'margin-bottom': '20'
          }"
          count="5"
          animation="pulse"
        ></ngx-skeleton-loader>
      </div>
    </div>
  </div>
</div>
<div (click)="closeSaveInfo(true)" class="overlay d-none"></div>

<!-- menu mobile -->
<div class="menu-mobile" [ngClass]="{ active: isOpenMenuMobile }">
  <div class="menu-mobile__overlay" (click)="handleToggleMenuMobile()"></div>

  <div class="menu-response">
    <div class="border-bottom">
      <div (click)="handleToggleMenuMobile()" class="close-menu h-1 float-end">
        <i class="fas fa-times"></i>
      </div>
    </div>

    <ul class="menu-res mt-5 border-top">
      <li class="menu-res-item menu-mobile__item" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
        <a
          (click)="handleToggleMenuMobile()"
          class="fw-bold menu-mobile__item-link text-decoration-none nav-link-item"
          routerLink="/"
          >Trang chủ</a
        >
      </li>
      <li class="menu-res-item menu-mobile__item" routerLinkActive="active">
        <a
          class="fw-bold menu-mobile__item-link nav-link-item text-decoration-none"
          (click)="handleToggleMenuMobile()"
          [routerLink]="['/cuoc-thi']"
        >
          Cuộc thi
        </a>
      </li>

      <li class="menu-res-item menu-mobile__item" routerLinkActive="active">
        <a
          class="fw-bold menu-mobile__item-link nav-link-item text-decoration-none"
          (click)="handleToggleMenuMobile()"
          [routerLink]="['/tuyen-dung']"
        >
          Tin tuyển dụng
        </a>
      </li>

      <li class="menu-res-item menu-mobile__item" routerLinkActive="active">
        <a
          (click)="handleToggleMenuMobile()"
          class="fw-bold menu-mobile__item-link nav-link-item text-decoration-none"
          routerLink="/danh-gia-nang-luc"
        >
          Đánh giá năng lực</a
        >
      </li>

      <li class="menu-res-item menu-mobile__item" routerLinkActive="active">
        <a
          (click)="handleToggleMenuMobile()"
          class="fw-bold menu-mobile__item-link nav-link-item text-decoration-none"
          [routerLink]="['/capacity-join']"
          >Trò chơi trực tiếp</a
        >
      </li>

      <li class="menu-res-item menu-mobile__item" routerLinkActive="active">
        <a
          (click)="handleToggleMenuMobile()"
          class="fw-bold menu-mobile__item-link nav-link-item text-decoration-none"
          [routerLink]="['/challenge']"
          >Thử thách</a
        >
      </li>

      <li class="menu-res-item menu-mobile__item" routerLinkActive="active">
        <a
          (click)="handleToggleMenuMobile()"
          class="fw-bold menu-mobile__item-link nav-link-item text-decoration-none"
          routerLink="/tin-tuc"
        >
          Tin tức
        </a>
      </li>
    </ul>
  </div>
</div>
