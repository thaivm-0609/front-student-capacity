<div class="contest-detail-box">
  <div class="container py-4">
    <div class="contest-detail-header">
      <div class="contest-detail-left">
        <nav aria-label="breadcrumb" *ngIf="contestDetail">
          <ol class="breadcrumb">
            <li class="breadcrumb-item text-primary">
              <a routerLink="/">Trang chủ</a>
            </li>
            <li class="breadcrumb-item text-primary">
              <a routerLink="/cuoc-thi">Cuộc thi</a>
            </li>
            <li class="breadcrumb-item active" aria-current="page">
              {{ contestDetail.name }}
            </li>
          </ol>
        </nav>
        <div *ngIf="!contestDetail">
          <ngx-skeleton-loader [theme]="{ 'height.px': 25 , 'width.px': 400 }">
          </ngx-skeleton-loader>
        </div>
        <div class="contest-detail-left-header row">
          <div class="col-5 contest-detail-left-img-box">
            <img
              *ngIf="statusContest == true"
              [src]="contestDetail.img"
              alt=""
              class="w-100 contest-detail-left-img"
            />
            <ngx-skeleton-loader
              *ngIf="statusContest == false"
              [theme]="{
                height: '250px',
                'margin-left': '-15px',
                width: '100%',
                'margin-bottom': '-5px'
              }"
              appearance="line"
            >
            </ngx-skeleton-loader>
          </div>
          <div class="col-7" style="margin-left: -10px">
            <div class="py-3 contest-info-box" *ngIf="statusContest == true">
              <p class="fw-bold fs-5 color-blue contest-info-item text-collapse">
                Cuộc thi : {{ contestDetail.name }}
              </p>
              <p
                class="color-gray color-blue contest-info-item fs-text fw-bold"
              >
                <i class="fas -3 fa-clock contest-date-open-end"></i>
                <span class="fw-normal"
                  >{{ contestDetail.date_start | formatDate }} -
                  {{ contestDetail.register_deadline | formatDate }}</span
                >
              </p>
              <p class="fw-bold color-gray contest-info-item fs-text">
                Nội dung &nbsp;<span
                  (click)="open(content)"
                  class="btn-main fw-normal rounded p-1 px-2"
                  style="cursor: pointer"
                >
                  Chi tiết</span
                >
              </p>
              <p class="fw-bold contest-info-item color-gray fs-text">
                Số vòng :
                <span class="fw-normal">{{ contestDetail.rounds.length }}</span>
              </p>
              <ng-template #content let-modal>
                <div class="modal-header">
                  <h3
                    class="modal-title fw-bold"
                    id="modal-basic-title color-blue "
                  >
                    Nội dung cuộc thi
                  </h3>
                  <i
                    (click)="modal.close('Close click')"
                    style="cursor: pointer"
                    class="fas fa-times fs-4"
                  ></i>
                </div>
                <div
                  class="modal-body description"
                  [innerHTML]="contestDetail.description"
                ></div>
                <div class="modal-footer">
                  <button
                    type="button"
                    mat-stroked-button
                    (click)="modal.close('Close click')"
                  >
                    Đóng
                  </button>
                </div>
              </ng-template>
              <div
                class="d-flex contest-info-item justify-content-start align-items-center"
              >
                <p class="fw-bold fs-text color-gray">Tổng số đội :</p>
                &nbsp; &nbsp;
                <p class="" *ngIf="contestDetail.teams.length == 0">
                  Chưa có team nào !
                </p>
                <div class="" *ngIf="contestDetail.teams.length > 0">
                  <app-list-avatar-user
                  
                    [listTeam]="contestDetail.teams"
                    [titleModelName]="'Danh sách các đội'"
                  >
                  </app-list-avatar-user>
                </div>
              </div>
              <div
                class="d-flex contest-info-item justify-content-start align-items-center"
              >
                <p class="fw-bold fs-text color-gray">Ban giám khảo :</p>
                &nbsp; &nbsp;
                <p class="" *ngIf="contestDetail.judges.length == 0">
                  Chưa có ban giám khảo !
                </p>
                <div *ngIf="contestDetail.judges.length > 0">
                  <app-list-avatar-user
                    [listTeam]="contestDetail.judges"
                    [titleModelName]="'Danh sách ban giám khảo'"
                  >
                  </app-list-avatar-user>
                </div>
              </div>
            </div>
            <div *ngIf="statusContest == false" class="p-2 mt-2">
              <ngx-skeleton-loader
                [theme]="{
                  'height.px': 20,
                  'margin-bottom': '10px',
                  width: '50%'
                }"
                appearance="line"
              >
              </ngx-skeleton-loader>
              <ngx-skeleton-loader
                [theme]="{ 'height.px': 10, 'margin-bottom': '10px' }"
                appearance="line"
              >
              </ngx-skeleton-loader>
              <ngx-skeleton-loader
                [theme]="{ 'height.px': 30, 'margin-bottom': '10px' }"
                appearance="line"
              >
              </ngx-skeleton-loader>
              <div class="d-flex align-items-center">
                <div class="col-3">
                  <ngx-skeleton-loader
                    [theme]="{ 'height.px': 20, 'margin-bottom': '10px' }"
                    appearance="line"
                  >
                  </ngx-skeleton-loader>
                </div>
                <div class="col-7">
                  <ngx-skeleton-loader
                    [theme]="{ 'height.px': 40, 'margin-bottom': '10px' }"
                    appearance="circle"
                  >
                  </ngx-skeleton-loader>
                  <ngx-skeleton-loader
                    [theme]="{ 'height.px': 40, 'margin-bottom': '10px' }"
                    appearance="circle"
                  >
                  </ngx-skeleton-loader>
                  <ngx-skeleton-loader
                    [theme]="{ 'height.px': 40, 'margin-bottom': '10px' }"
                    appearance="circle"
                  >
                  </ngx-skeleton-loader>
                  <ngx-skeleton-loader
                    [theme]="{ 'height.px': 40, 'margin-bottom': '10px' }"
                    appearance="circle"
                  >
                  </ngx-skeleton-loader>
                </div>
              </div>
              <div class="d-flex align-items-center">
                <div class="col-3">
                  <ngx-skeleton-loader
                    [theme]="{ 'height.px': 20, 'margin-bottom': '10px' }"
                    appearance="line"
                  >
                  </ngx-skeleton-loader>
                </div>
                <div class="col-7">
                  <ngx-skeleton-loader
                    [theme]="{ 'height.px': 40, 'margin-bottom': '10px' }"
                    appearance="circle"
                  >
                  </ngx-skeleton-loader>
                  <ngx-skeleton-loader
                    [theme]="{ 'height.px': 40, 'margin-bottom': '10px' }"
                    appearance="circle"
                  >
                  </ngx-skeleton-loader>
                  <ngx-skeleton-loader
                    [theme]="{ 'height.px': 40, 'margin-bottom': '10px' }"
                    appearance="circle"
                  >
                  </ngx-skeleton-loader>
                  <ngx-skeleton-loader
                    [theme]="{ 'height.px': 40, 'margin-bottom': '10px' }"
                    appearance="circle"
                  >
                  </ngx-skeleton-loader>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="mt-3 contest-detail-section" *ngIf="statusContest">
          <div class="example-button-row p-2">
            <button
              mat-button
              *ngIf="resultRank.length > 0"
              (click)="scrollWin('#round', 100)"
              class="example-button-item fw-bold"
            >
              Xếp hạng
            </button>
            <button
              (click)="scrollWin('#round', 150)"
              mat-button
              class="example-button-item fw-bold"
            >
              Vòng thi
            </button>
            <button
              (click)="scrollWin('#new-page', 200)"
              mat-button
              class="example-button-item fw-bold"
            >
              Tin tức
            </button>
            <button
              *ngIf="listPostResult.length > 0"
              (click)="scrollWin('#more', 200)"
              mat-button
              class="example-button-item fw-bold"
            >
              Tin tức khác
            </button>
            <button
              *ngIf="countContestRelated"
              (click)="scrollWin('#related-contest', 200)"
              mat-button
              class="example-button-item fw-bold"
            >
              Cuộc thi liên quan
            </button>
          </div>
        </div>

        <div class="mt-3" *ngIf="!contestDetail">
          <ngx-skeleton-loader [theme]="{ 'height.px': 40 }">
          </ngx-skeleton-loader>
        </div>

      
     
        <app-list-result-round
          id="contest-result"
          *ngIf="resultRank.length > 0"
          [next] = "payLinkNextResult"
          [prev] = "payLinkPrevResult"
          [total] = "total"
          (payingResult)="getUrlPaying($event)"
          [links]="payLinkArrayResult"
          [statusLinks]="statusLinks"
          [roundResult]="resultRank"
          (payingResultSort)="sortResult($event)"
          class="mt-3"
        >
        </app-list-result-round>

        <div class="mt-3 content-round-page bg-white">
          <app-round
            id="round"
            
            [contestDetail]="contestDetail"
            [statusContest]="statusContest"
          >
          </app-round>

          <div id="new-page" *ngIf="statusContest == true">
            <p
              class="fw-bold fs-5 color-blue my-2"
              *ngIf="contestDetail.post_new != null"
            >
              Tin tức cuộc thi
            </p>
            <div class="title-line"></div>
            <div
              class="new-page-img"
              *ngIf="contestDetail.post_new != null"
              [innerHTML]="contestDetail.post_new"
            ></div>
          </div>
        </div>
      </div>

      <div class="contest-detail-right">
        <div class="contest-detail-right-in rounded border">
          <app-contest-aside
            class="contest-detail-right-in"
            [contestDetail]="contestDetail"
            [statusContest]="statusContest"
          >
          </app-contest-aside>
        </div>
      </div>
      
    </div>
    <div  *ngIf="listPostResult.length > 0" id="more" class="my-4">
      <p class="fw-bold my-2 text-uppercase text-center fs-5 color-blue">
        Tin tức khác
      </p>
      <div class="title-line mx-auto"></div>
      <app-list-post
        [countColumn]="4"
        [listPost]="listPostResult"
      ></app-list-post>
    </div>
    <div
      class="related-contest"
      id="related-contest"
      *ngIf="statusContestRelated == true"
    >
      <p
        *ngIf="countContestRelated == true"
        class="fw-bold my-2 text-uppercase text-center fs-5 color-blue"
      >
        Cuộc thi liên quan
      </p>
      <div class="title-line mx-auto"></div>
      <div class="mt-3 row" *ngIf="countContestRelated == true">
        <div *ngFor="let item of contestRelated" class="col-6">
          <app-contest-item [isRelate]="true" [item]="item"> </app-contest-item>
        </div>
      </div>
    </div>
  </div>
</div>
